# 文件管理器功能说明

## 功能概述

已将原来的"拖入文件上传"功能升级为完整的文件管理器，支持以下功能：

### 1. 文件管理器界面
- 点击右上角的"文件管理器"按钮打开文件管理器弹窗
- 美观的现代化UI，暗色主题

### 2. 支持的功能

#### 文件浏览
- 显示当前目录的所有文件和文件夹
- 显示文件大小信息
- 文件和文件夹使用不同图标区分（📁 文件夹 / 📄 文件）

#### 目录导航
- 点击文件夹可以进入该目录
- "⬆️ 上级目录"按钮返回上级目录
- 实时显示当前路径

#### 文件上传
- **方式1**: 点击"📄 上传文件"按钮选择单个或多个文件
- **方式2**: 点击"📁 上传文件夹"按钮上传整个文件夹
- **方式3**: 拖拽文件到上传区域
- 支持多文件同时上传
- 实时显示上传进度
- 文件会上传到当前浏览的目录

#### 文件下载
- 点击文件右侧的"下载"按钮下载文件到本地
- 自动以原文件名保存

#### 其他功能
- "🔄 刷新"按钮刷新文件列表
- 点击弹窗外部区域或右上角 × 关闭文件管理器

## 技术实现

### 前端修改
1. `index.html`: 
   - 将拖拽区域改为按钮
   - 添加文件管理器模态框
   - 添加CSS样式

2. `main.js`:
   - 移除旧的拖拽上传代码
   - 实现文件管理器交互逻辑
   - 添加文件上传、下载、目录导航功能

### 后端修改
1. `handler.py`:
   - 修改 `filesendHandler`: 支持指定远程路径
   - 新增 `FileListHandler`: 列出远程目录文件
   - 新增 `FileDownloadHandler`: 下载远程文件

2. `main.py`:
   - 添加新的路由:
     - `/filelist`: 获取文件列表
     - `/filedownload`: 下载文件

## 使用方法

1. SSH登录成功后，右上角会出现"文件管理器"按钮
2. 点击按钮打开文件管理器
3. 浏览、上传、下载文件
4. 完成后关闭弹窗

## 注意事项

- 需要先成功连接SSH才能使用文件管理器
- 大文件上传可能需要较长时间
- 文件操作基于SSH连接的用户权限

